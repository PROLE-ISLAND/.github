name: Feature Request
description: 機能要望・新機能追加
title: "[Feature]: "
labels: ["feature", "needs-triage", "design-review"]
body:
  - type: markdown
    attributes:
      value: |
        ## 機能要望テンプレート
        新機能の要望を記入してください。

        ### Figma-First ルール
        **UI/UX変更を含む機能は、デザイン（Figma または v0）を先に作成してからこのIssueを作成してください。**
        デザインリンクがない場合、`design-review` ラベルで保留され、実装は開始されません。

  - type: dropdown
    id: priority
    attributes:
      label: 優先度
      description: 優先度を選択してください
      options:
        - P0: Critical (本番障害相当)
        - P1: High (今週対応)
        - P2: Medium (今スプリント)
        - P3: Low (バックログ)
      default: 2
    validations:
      required: true

  - type: dropdown
    id: dod_level
    attributes:
      label: DoD Level (品質基準)
      description: 求める品質レベルを選択
      options:
        - Bronze (プロトタイプ・80%カバレッジ)
        - Silver (開発版・85%カバレッジ) ← 推奨
        - Gold (本番品質・95%カバレッジ)
      default: 1
    validations:
      required: true

  - type: textarea
    id: description
    attributes:
      label: 機能説明
      description: 追加したい機能の説明
      placeholder: どのような機能を追加したいですか？
    validations:
      required: true

  - type: textarea
    id: motivation
    attributes:
      label: 背景・動機
      description: なぜこの機能が必要ですか？
      placeholder: この機能が解決する課題や、もたらすメリットを説明してください

  - type: input
    id: figma-link
    attributes:
      label: Figma Mockup Link
      description: |
        **UI機能は必須** - Issue作成前にFigmaを作成してリンクを貼ってください。
        リンクがない場合、実装は開始されません（design-reviewで保留）。
        バックエンドのみの機能はスキップ可。
      placeholder: "https://www.figma.com/file/..."
    validations:
      required: false

  - type: input
    id: v0-link
    attributes:
      label: v0 Generation Link (Optional)
      description: |
        v0.devでUIを生成した場合、そのURLを貼ってください。
        実装時にコードを流用できます。shadcn/ui + Tailwindなのでそのまま使えます。
      placeholder: "https://v0.dev/chat/..."
    validations:
      required: false

  - type: checkboxes
    id: design-checklist
    attributes:
      label: デザインチェックリスト
      description: UI/UX機能の場合、以下を確認してください
      options:
        - label: "Figma または v0 でモックアップを作成し、上記にリンクを貼った"
        - label: "モバイルレスポンシブ対応を考慮した"
        - label: "ダークモード対応を確認した"
        - label: "アクセシビリティ（コントラスト、フォントサイズ）を確認した"
        - label: "バックエンドのみの機能（UI変更なし）"

  - type: textarea
    id: acceptance_criteria
    attributes:
      label: 受け入れ条件
      description: 完了とみなす条件をチェックリストで記入
      value: |
        - [ ]
        - [ ]
        - [ ] テストが追加されている
    validations:
      required: true

  - type: textarea
    id: technical_notes
    attributes:
      label: 技術的な補足（任意）
      description: 実装に関するヒントや制約など
      placeholder: 関連ファイル、使用技術、制約事項など

  - type: textarea
    id: impact-scope
    attributes:
      label: 影響範囲
      description: この変更が影響する範囲を記載してください
      value: |
        ### 変更対象
        - [ ] フロントエンド（コンポーネント）
        - [ ] バックエンド（API）
        - [ ] データベース（スキーマ/マイグレーション）
        - [ ] インフラ（CI/CD、設定）

        ### 変更予定ファイル
        -

        ### 影響を受ける既存機能
        -
    validations:
      required: true

  - type: checkboxes
    id: db-changes
    attributes:
      label: データベース変更
      description: DB変更がある場合はチェックしてください
      options:
        - label: "テーブル追加/変更あり → マイグレーション必須"
        - label: "RLSポリシー追加/変更あり"
        - label: "インデックス追加が必要そう"
        - label: "DB変更なし"

  - type: checkboxes
    id: api-changes
    attributes:
      label: API変更
      description: API変更がある場合はチェックしてください
      options:
        - label: "新規エンドポイント追加"
        - label: "既存エンドポイント変更（破壊的変更の可能性）"
        - label: "レスポンス形式変更"
        - label: "API変更なし"

  - type: checkboxes
    id: checklist
    attributes:
      label: 事前確認
      options:
        - label: 重複Issueがないことを確認しました
          required: true
